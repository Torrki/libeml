<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EML: Event Main Loop</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">EML<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">Libreria statica per creare un mainloop gestore di eventi tramite thread POSIX</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Event Main Loop </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Introduzione"></a>
Introduzione</h1>
<p>Una libreria statica per l'implementazione di un sistema di main loop guidato da eventi. In un progetto multi-threading, un thread viene nominato come un main loop che risponde a dei comandi (eventi) generati da altri thread che hanno il main loop come riferimento per la gestione degli eventi. Ogni main loop ha una coda degli eventi associata, che raccoglie tutti i comandi che sono inviati, quando il main loop viene eseguito verifica se ci sono nuovi eventi nella coda, se si estrae quello in cima e lo elabora, altrimenti si mette in attesa; nella struttura multi-thread il thread del main loop viene eseguito solo quando ci sono degli eventi da elaborare, normalmente si trova in stato di sleep, viene attivato tramite una segnalazione da parte dei thread che richiedono di eseguire un comando.</p>
<h2><a class="anchor" id="Implementazione"></a>
Implementazione con POSIX.</h2>
<p>Trattandosi di uno sviluppo con Ubuntu, i thread usati rispettano lo standard POSIX, e dunque la segnalazione tra thread avviene tramite segnali e modalità che sono descritte nello standard. I thread che inviano comandi al main loop possono attendere per una risposta oppure continuare l'esecuzione, nel primo caso il thread chiamante si autosospende tramite sigwait, e viene risvegliato quando riceve un segnale SIGCONT, possibilmente inviato dal thread main loop. Per poter intercettare tutti i SIGCONT in maniera ordinata, i thread prima di autosospendersi modificano la propria maschera dei segnali impostando SIGCONT come un segnale da bloccare al suo arrivo, questa procedura è fatta preliminarmente per il thread main loop al momento della sua creazione in modo tale da bloccare anche i segnali SIGCONT che arrivano quando il thread è sveglio, il risultato è che il thread main loop entra in stato di sleep, tramite la funzione waitNewEvent, solo quando non ci sono più segnali SIGCONT accodati e la coda degli eventi è vuota.</p>
<p>I thread POSIX sono molto rigidi per quanto riguarda la condivisione della memoria, l'unica zona in comune in un processo multi-thread è lo heap, perciò tutte le funzioni che richiedono che ci sia una comunicazione diretta tra thread chiamante e main loop, come passaggio di argomenti o ottenere la risposta del main loop, devono usare delle zone di memoria che sono allocate nello heap del processo. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
